# ==========================================
# Spring Boot Configuration Sample
# 复制此文件为 application.properties (生产/Docker) 
# 或 application-dev.properties (本地开发)
# ==========================================

spring.application.name=blog

# --- Server Port ---
# Local: 8081 (if 8080 is busy)
# Docker: 8080
server.port=8080

# --- Database ---
# Local: jdbc:mysql://localhost:3306/blogdb...
# Docker: jdbc:mysql://mysql:3306/blogdb...
# 20050602
spring.datasource.url=jdbc:mysql://localhost:3306/blogdb?useSSL=false&serverTimezone=UTC&characterEncoding=utf8&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=your_password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# --- JPA ---
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.open-in-view=false

# --- Redis ---
# Local: localhost
# Docker: redis
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.database=0
# spring.data.redis.password=

# --- RabbitMQ ---
# Local: localhost
# Docker: rabbitmq
spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest
app.rabbitmq.exchange=blog.notifications

# --- JWT Security ---
# 请务必修改此密钥
# VJ2fwrQ7Qq3S3UqY5yH2Z0t9Nf3KX8u6rPgC1yM4rQe9W7ZkH1vT2aR5mN8sQ0xB
jwt.secret=your_very_long_random_secret_key_here_at_least_32_bytes

# --- Static Resources (CRITICAL) ---
# Local (Windows): file:D:/Projects/selfprojects/PenRoseBlog/sources/
# Docker: file:/app/sources/
resource.sources-location=file:/app/sources/
resource.avatar-location=${resource.sources-location}avatar/
resource.background-location=${resource.sources-location}background/
resource.blogpostcover-location=${resource.sources-location}blogpostcover/
resource.blogpostcontent-location=${resource.sources-location}blogpostcontent/

# Private Messages
resource.message-media-location=${resource.sources-location}messages/
resource.message-media-access-prefix=/files/messages

# --- File Upload Limits ---
spring.servlet.multipart.max-file-size=648MB
spring.servlet.multipart.max-request-size=648MB

# --- AI Configuration (Spring AI) ---
# Leave empty or use dummy key for local dev if not needed
spring.ai.openai.api-key=${OPENAI_API_KEY:sk-dummy-key}
spring.ai.openai.model=gpt-3.5-turbo
spring.ai.openai.api-base-url=https://api.openai.com

# --- OAuth2 (GitHub) ---
oauth2.github.client-id=your_github_client_id
oauth2.github.client-secret=your_github_client_secret
oauth2.github.redirect-uri=http://localhost:5173/auth/github/callback

# --- Flyway ---
# Disable for local dev if using new MySQL versions or manual schema management
spring.flyway.enabled=false

logging.level.com.kirisamemarisa.blog=DEBUG